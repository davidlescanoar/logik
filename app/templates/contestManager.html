{% extends "base.html" %}

{% load static %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/contestManager.css' %}" />
{% endblock %}

<!--Título-->
{% block title %} Contest manager {% endblock %}

<!--Contenido-->
{% block content %}
{% if user.is_staff %}
<div class="container listaContests">
    <div class="titulo text-center">
        <br />
        <h2>Lista de contests:</h2>
        <br />
    </div>
    <table class="table table-dark">
        <thead class="text-center">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Nombre</th>
                <th scope="col">Duración</th>
                <th scope="col">Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for i in contests %}
            <tr class="text-center">
                <th class="contest-font-size" scope="row">{{forloop.counter}}</th>

                <td class="contest-font-size"><a href="#">{{i.0}}</a></td>
                <td class="contest-font-size">{{i.1}} min.</td>

                <td class="contest-font-size">
                    <form method="POST">
                        {% csrf_token %}
                        <button type="submit" name="editar" value="{{i.0}}" class="btn btn-primary">Editar</button>
                        <button type="submit" name="eliminar" value="{{i.0}}" class="btn btn-danger">Eliminar</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <a href="/createContest" role="button">
        <button type="button" class="btn btn-danger modalButton">
            Crear contest
        </button>
    </a>
    <!-- Button -->
    
</div>
{% else %}
<div class="container h-100 d-flex">
    <div class="jumbotron my-auto">
        <h1 class="display-4">Error</h1>
        <p class="lead">No tenés permitido ver la página ya que solo el staff debe tener acceso para poder administrar
            las funcionalidades.</p>
        <hr class="my-4">
        <p>Si sos staff, recordá hacer el login para poder acceder.</p>
        <a class="btn btn-primary btn-lg" href="/" role="button">Login</a>
    </div>
</div>
{% endif %}
{% endblock %}